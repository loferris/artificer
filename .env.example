# =====================================
# Environment Configuration Template
# =====================================
# Copy this file to .env and fill in your values
# DO NOT COMMIT YOUR .env FILE WITH SECRETS
# =====================================

# Environment mode: development or production
NODE_ENV=development

# =====================================
# OpenRouter Configuration
# =====================================
# Get API key from: https://openrouter.ai/dashboard
OPENROUTER_API_KEY=your_openrouter_api_key_here
# Primary model to use for AI responses
OPENROUTER_MODEL=anthropic/claude-3-haiku
# Fallback model if primary model fails or is not set
OPENROUTER_DEFAULT_MODEL=deepseek-chat
# Your application name
SITE_NAME=TeddyBox Chat

# =====================================
# Chain Orchestration Configuration
# =====================================
# Enable intelligent chain-of-models orchestration
CHAIN_ROUTING_ENABLED=true

# Models for each orchestration stage
# Analyzer: Fast/cheap model to analyze query complexity
ANALYZER_MODEL=deepseek/deepseek-chat
# Router: Fast model to decide which execution model to use
ROUTER_MODEL=anthropic/claude-3-haiku
# Validator: Quality model to validate responses
VALIDATOR_MODEL=anthropic/claude-3-5-sonnet

# Available models for execution (comma-separated)
# These are the models that the router can choose from
OPENROUTER_MODELS=deepseek/deepseek-chat,anthropic/claude-3-haiku,anthropic/claude-3-5-sonnet,openai/gpt-4o-mini

# Routing thresholds
# Only use chain routing for queries with complexity > this value (1-10 scale)
CHAIN_ROUTING_MIN_COMPLEXITY=5

# Quality settings
# Enable response validation (recommended for complex tasks)
VALIDATION_ENABLED=true
# Maximum number of retries with different models if validation fails
MAX_RETRIES=2

# Cost optimization
# Prefer cheaper models when quality difference is minimal
PREFER_CHEAP_MODELS=false

# =====================================
# Database Configuration
# =====================================
# PostgreSQL database connection string
# Format: postgresql://[user[:password]@][host][:port][/database][?options]
# Examples:
#   Local: postgresql://postgres:password@localhost:5432/chatapp
#   Supabase: postgresql://postgres:password@db.xyz.supabase.co:5432/postgres
#   Railway: postgresql://postgres:password@xyz.railway.app:5432/railway
#   Neon: postgresql://user:password@ep-xyz.us-east-1.aws.neon.tech/chatapp
DATABASE_URL="postgresql://postgres:password@localhost:5432/chatapp"

# Alternative: SQLite (for local development only)
# DATABASE_URL="file:./dev.db"

# =====================================
# Assistant Configuration
# =====================================
# Set to true to only use mock assistant
USE_MOCK=false

# =====================================
# Vector Database & Embeddings
# =====================================
# Chroma vector database URL (used for semantic search)
CHROMA_URL=http://localhost:8000

# OpenAI API key for generating embeddings
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Embedding model to use (text-embedding-3-small is recommended)
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# Enable RAG (Retrieval-Augmented Generation) for conversations
# When enabled, conversations linked to projects will automatically
# retrieve relevant context from project documents
ENABLE_RAG=false

# Enable automatic conversation summarization
# When enabled, long conversations will be automatically summarized
# to manage context window limits and improve performance
ENABLE_SUMMARIZATION=false

# =====================================
# Next.js Configuration
# =====================================
NEXT_PUBLIC_SITE_NAME=TeddyBox Chat

# =====================================
# Notion Integration (Optional)
# =====================================
# NOTION_API_KEY=your_notion_integration_secret
# NOTION_DATABASE_ID=your_notion_database_id

# =====================================
# Google Docs Integration (Optional)
# =====================================
# GOOGLE_CLIENT_ID=your_google_client_id
# GOOGLE_API_KEY=your_google_api_key

# =====================================
# Authentication & Security
# =====================================
# Set to 'true' to require API key authentication
# Leave unset or 'false' for demo/development mode
REQUIRE_AUTH=false

# Comma-separated list of whitelisted IP addresses
# Leave empty to allow all IPs (not recommended for production)
# Example: IP_WHITELIST=192.168.1.1,203.0.113.0
IP_WHITELIST=

# Admin email (used when creating first user)
ADMIN_EMAIL=admin@example.com

# =====================================
# Instructions
# =====================================
# 1. Copy this file to .env
# 2. Replace placeholder values with your actual credentials
# 3. Set up PostgreSQL database (local, Supabase, Railway, Neon, etc.)
# 4. Update DATABASE_URL with your PostgreSQL connection string
# 5. Never commit your .env file to version control!
# 6. Run 'npx prisma migrate dev' to create the database schema
